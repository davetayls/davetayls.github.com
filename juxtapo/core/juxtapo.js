/**
 * Juxtapo
 * Front End Tools: JavaScript Library
 * http://juxtapo.net/
 * 
 * Version 1.2.1
 * 
 * Copyright (c) 2010 Dave Taylor (@davetayls), http://the-taylors.org
 * This source code is subject to terms and conditions of the New BSD License.
 * A copy of the license can be found in the license.txt file at the root of this distribution.
 * If you cannot locate the New BSD License, please send an email to dave@the-taylors.org.
 * By using this source code in any fashion, you are agreeing to be bound by the terms of the New BSD License.
 * You must not remove this notice, or any other, from this software.
 * 
 * If you find this software useful please support it's development by 
 * donating at http://github.com/davetayls/juxtapo.
 *
 */

var juxtapo;
(function(d){var e="",a=function(){juxtapo.coreJsUrl()&&juxtapo.utils.requireResource(juxtapo.coreJsUrl()+"juxtapo.css")},c=function(){juxtapo.container=document.createElement("div");d(juxtapo.container).attr("id","juxtapo-container");d("body").append(juxtapo.container)},b=function(){for(var g in juxtapo.plg)if(juxtapo.plg.hasOwnProperty(g)){var j=juxtapo.plg[g];typeof j.init==="function"&&j.init()}},f=function(){var g=juxtapo.utils.getQuery("status");juxtapo.currentStatus=g?g:juxtapo.statuses.pause},i=
function(){d(juxtapo).trigger("_initComplete")},h=function(){d(juxtapo).trigger("_initConfig")};juxtapo={version:"1.2.1",statuses:{off:0,play:1,pause:2},designViews:{hidden:0,semiTransparent:1,opaque:2},container:null,controller:null,currentDesignView:0,currentStatus:2,designVisible:false,plg:{add:function(g,j){this[g]||(this[g]=new juxtapo.Plugin(j))}},globalSettings:{},coreJsUrl:function(){if(e===""){e=juxtapo.utils.getJsLocation(/juxtapo(\.dev)*\.js/);if(!juxtapo.utils.isAbsoluteUrl(e)){e=juxtapo.utils.resolveAbsoluteUrl(window.location.href,
e);juxtapo.eh.logInfo("coreJsUrl: "+e)}}return e},init:function(){a();h();f();if(juxtapo.currentStatus!==juxtapo.statuses.off){c();juxtapo.templates.init();juxtapo.control.init()}juxtapo.eh.init();juxtapo.thumbs.init();b();i()},addPlugins:function(g){for(var j=0;j<g.length;j+=1){var k=juxtapo.utils.resolveAbsoluteUrl(juxtapo.coreJsUrl(),g[j]);document.write('<script type="text/javascript" src="'+k+'"><\/script>')}},addTemplate:function(g,j,k){if(g instanceof juxtapo.templates.TemplateItem){juxtapo.templates.collection.push(g);
return g}else{if(typeof g==="string")g=[g];g=new juxtapo.templates.TemplateItem(j,g,k);juxtapo.templates.collection.push(g);return g}},setDefaultStyles:function(g){juxtapo.templates.TemplateItem.defaultStyles=g},initConfig:function(g){d(juxtapo).bind("_initConfig",g)},initComplete:function(g){d(juxtapo).bind("_initComplete",g)}};juxtapo.onBody_KeyDown=function(g){var j;if(window.event)j=window.event.keyCode;else if(g)j=g.which;else return true;juxtapo.eh.logInfo("keycode is: "+j);if(g.ctrlKey&&(j===
79||j===39)){juxtapo.templates.forward();juxtapo.utils.preventDefaultEventAction(g);return false}if(g.ctrlKey&&(j===85||j===37)){juxtapo.templates.back();juxtapo.utils.preventDefaultEventAction(g);return false}if(g.ctrlKey&&j===38){juxtapo.templates.change(true);juxtapo.utils.preventDefaultEventAction(g);return false}if(g.ctrlKey&&j===40){juxtapo.templates.change(false);juxtapo.utils.preventDefaultEventAction(g);return false}if(g.ctrlKey&&j===32){juxtapo.control.toggle();juxtapo.utils.preventDefaultEventAction(g);
return false}var k=g.shiftKey?1:25;if(g.ctrlKey&&j===73){juxtapo.templates.nudge("top",k);juxtapo.utils.preventDefaultEventAction(g);return false}if(g.ctrlKey&&j===76){juxtapo.templates.nudge("right",k);juxtapo.utils.preventDefaultEventAction(g);return false}if(g.ctrlKey&&j===75){juxtapo.templates.nudge("bottom",k);juxtapo.utils.preventDefaultEventAction(g);return false}if(g.ctrlKey&&j===74){juxtapo.templates.nudge("left",k);juxtapo.utils.preventDefaultEventAction(g);return false}return true}})(jQuery,
this);if(window.addEventListener)window.addEventListener("load",juxtapo.init,false);else window.attachEvent&&window.attachEvent("onload",juxtapo.init);
(function(d){var e=null;juxtapo.eh={errors:"",hasError:false,initCompleted:false,dropDown:function(){return e},init:function(){e=new juxtapo.ui.DropDown({style:{height:"300px",width:"450px"}});e.text("e");e.title("Error logger");d(e.contents).addClass("juxtapo-errorBox");juxtapo.eh.renderErrors();this.initCompleted=true},logInfo:function(a){juxtapo.eh.errors='<li class="juxtapo-info">['+juxtapo.utils.date.toShortTimeString(new Date)+"] "+a+"</li>"+juxtapo.eh.errors;juxtapo.eh.renderErrors();return juxtapo.eh.errors},
logError:function(a){if(typeof a==="string")juxtapo.eh.errors='<li class="juxtapo-error">'+a+"</li>"+juxtapo.eh.errors;else if(typeof a==="object")juxtapo.eh.errors='<li class="juxtapo-error">[object]'+juxtapo.utils.objectToStructureString(a)+"</li>"+juxtapo.eh.errors;else juxtapo.eh.errors+='<li class="juxtapo-error">'+a.toString()+"</li>";juxtapo.eh.hasError=true;juxtapo.eh.renderErrors();return juxtapo.eh.errors},renderErrors:function(){if(e){e.contentHtml("<ul>"+juxtapo.eh.errors+"</ul>");d(e.controller).removeClass("juxtapo-eh-error");
if(juxtapo.eh.hasError===true){d(e.controller).addClass("juxtapo-eh-error");e.text("!")}else e.text("e")}return true}};juxtapo.eh.Exception=function(a,c){this.message=a;this.trace=c}})(jQuery);
(function(d){juxtapo.control={controller:document.createElement("div"),initCompleted:false,secondsBeforeRefresh:2.5,timerId:-1,init:function(){d(this.controller).attr({"class":"juxtapo-btn",id:"juxtapo-controller",title:"Automatically refresh the page"}).click(this.toggle).appendTo(juxtapo.container);juxtapo.currentStatus===juxtapo.statuses.pause?juxtapo.control.pause():juxtapo.control.play();this.initCompleted=true},play:function(){juxtapo.currentStatus=juxtapo.statuses.play;this.controller.innerHTML=
"|&nbsp;|";this.timerId=setTimeout("juxtapo.control.reload()",this.secondsBeforeRefresh*1E3);return juxtapo.currentStatus},pause:function(){juxtapo.currentStatus=juxtapo.statuses.pause;this.controller.innerHTML=">";clearTimeout(this.timerId);return juxtapo.currentStatus},reload:function(){if(juxtapo.currentStatus===juxtapo.statuses.play){var e=juxtapo.utils.getQuery("jxurl");e=e?unescape(e):location.href;var a=e.indexOf("?")>-1?"&":"?";e=e+a+"jxurl="+escape(e)+"&r="+(new Date).toString()+"&status="+
juxtapo.currentStatus+"&design="+juxtapo.designVisible+"&v="+d(document).scrollTop()+"&dv="+juxtapo.currentDesignView+"&di="+juxtapo.templates.selectedTemplateIndex;location.href=e}},toggle:function(){return juxtapo.currentStatus===juxtapo.statuses.pause?juxtapo.control.play():juxtapo.control.pause()}}})(jQuery);
(function(d){var e=null,a=function(b,f,i){d(juxtapo).trigger("_overlayImagePositionChanged",[b,f,i])},c=function(){d(juxtapo.templates.overlayButton).removeClass("juxtapo-overlayTransparent").removeClass("juxtapo-overlaySemiTrans").removeClass("juxtapo-overlayOpaque")};juxtapo.templates={collection:[],selectedTemplateIndex:0,back:function(){if(juxtapo.currentDesignView===juxtapo.designViews.hidden)juxtapo.templates.show();else juxtapo.currentDesignView===juxtapo.designViews.semiTransparent?juxtapo.templates.hide():
juxtapo.templates.semiTransparent()},change:function(b){if(b){b=juxtapo.templates.selectedTemplateIndex-1;if(b<0)b=juxtapo.templates.collection.length-1}else{b=juxtapo.templates.selectedTemplateIndex+1;if(b>juxtapo.templates.collection.length-1)b=0}juxtapo.templates.changeTo(b)},changeTo:function(b){var f=null;if(typeof b==="undefined")return false;else if(typeof b==="object")f=b;else if(typeof b==="number"&&b<juxtapo.templates.collection.length){juxtapo.templates.selectedTemplateIndex=b;f=juxtapo.templates.collection[b]}if(f){b=
d.extend({},juxtapo.templates.TemplateItem.defaultStyles,f.settings.style);d("#design").attr("src",f.getImageSrc()).css(b)}},selectedTemplateItem:function(){return juxtapo.templates.collection[juxtapo.templates.selectedTemplateIndex]},overlayImageElement:function(b){if(typeof b!=="undefined")e=b;else e||(e=document.getElementById("design"));return e},filterBySearch:function(b){var f=null;if(b==="")d("#juxtapo-thumbs-container .juxtapo-thumb").show();else{f=this.search(b);d("#juxtapo-thumbs-container .juxtapo-thumb").hide();
for(var i=0;i<f.designs.length;i+=1)f.designs[i].thumbnail.show()}return{q:b,designs:f}},forward:function(){if(juxtapo.currentDesignView===juxtapo.designViews.hidden)juxtapo.templates.semiTransparent();else juxtapo.currentDesignView===juxtapo.designViews.semiTransparent?juxtapo.templates.show():juxtapo.templates.hide()},getAll:function(){return juxtapo.templates.collection},getTemplateFromUrl:function(b){b=b.toLowerCase();for(var f=0;f<juxtapo.templates.collection.length;f+=1)for(var i=juxtapo.templates.collection[f],
h=0;h<i.paths.length;h+=1){var g=i.paths[h].toLowerCase();if(b.juxtapoContains(g)){juxtapo.templates.selectedTemplawteIndex=f;return i}}return juxtapo.templates.collection[0]},hide:function(){d("#design").css("display","none");juxtapo.designVisible=false;juxtapo.currentDesignView=juxtapo.designViews.hidden;c();d(this.overlayButton).addClass("juxtapo-overlayTransparent");return juxtapo.currentDesignView},init:function(){d('<img id="design" src="noimage.jpg" alt="design image" />').appendTo("body").css({display:"none"});
juxtapo.utils.getQuery("di")!==null?juxtapo.templates.changeTo(parseInt(juxtapo.utils.getQuery("di"),10)):juxtapo.templates.changeTo(juxtapo.templates.getTemplateFromUrl(location.href));d(document).keydown(juxtapo.onBody_KeyDown);juxtapo.templates.overlayButton=document.createElement("div");d(juxtapo.templates.overlayButton).attr("class","juxtapo-btn");juxtapo.templates.overlayButton.onclick=juxtapo.templates.toggle;juxtapo.templates.overlayButton.innerHTML="OVERLAY";juxtapo.templates.overlayButton.title=
"Toggle visibility of the overlay";juxtapo.container.appendChild(juxtapo.templates.overlayButton);var b=juxtapo.utils.getQuery("design");if(b!==null)juxtapo.designVisible=b;b=juxtapo.utils.getQuery("dv");if(!b)b=juxtapo.currentDesignView;if(b!==null){b=parseInt(b,10);if(b===juxtapo.designViews.hidden)juxtapo.templates.hide();else b===juxtapo.designViews.semiTransparent?juxtapo.templates.semiTransparent():juxtapo.templates.show()}(b=juxtapo.utils.getQuery("v"))&&d(document).scrollTop(b)},nudge:function(b,
f){if(b==="")return false;if(typeof f==="undefined")f=1;var i=d(this.overlayImageElement()),h="margin-left";if(i.css("left").indexOf("%")<0)h=i.css("right")!=="auto"?"right":"left";var g={offSet:i.offset(),position:i.position()};switch(b){case "top":h=parseInt(i.css("top"),10);i.css("top",h-f);break;case "right":b=parseInt(i.css(h),10);h!=="right"?i.css(h,b+f):i.css(h,b-f);break;case "bottom":h=parseInt(i.css("top"),10);i.css("top",h+f);break;case "left":b=parseInt(i.css(h),10);h!=="right"?i.css(h,
b-f):i.css(h,b+f);break}f={offSet:i.offset(),position:i.position()};a(i.get(0),g,f);return this},search:function(b){var f={designs:[],indexes:[]};if(b!==""){b=b.toLowerCase();for(var i=0;i<juxtapo.templates.collection.length;i+=1){var h=juxtapo.templates.collection[i];if(h.imageUrl.toLowerCase().indexOf(b)>-1||h.paths[0].toLowerCase().indexOf(b)>-1){f.designs.push(h);f.indexes.push(i)}}}return f},show:function(){d("#design").css({display:"block",opacity:"1"});juxtapo.designVisible=true;juxtapo.currentDesignView=
juxtapo.designViews.opaque;c();d(this.overlayButton).addClass("juxtapo-overlayOpaque");return juxtapo.currentDesignView},semiTransparent:function(){d("#design").css({display:"block",opacity:"0.5"});juxtapo.designVisible=true;juxtapo.currentDesignView=juxtapo.designViews.semiTransparent;c();d(this.overlayButton).addClass("juxtapo-overlaySemiTrans");return juxtapo.currentDesignView},toggle:function(){juxtapo.templates.forward()},overlayImagePositionChanged:function(b){d(juxtapo).bind("_overlayImagePositionChanged",
b)}};juxtapo.templates.TemplateItem=function(b,f,i){this._init(b,f,i)};juxtapo.templates.TemplateItem.prototype={imageUrl:"",paths:[],settings:{data:{},style:{}},thumbnail:null,_init:function(b,f,i){var h=this;h.imageUrl=b;if(typeof f==="object"&&f.constructor===Array)h.paths=f;else if(typeof f==="string")h.paths=[f];else throw new juxtapo.eh.Exception("Cannot initiate this TemplateItem, valid paths can be a string or array of strings");h.settings=d.extend({},juxtapo.templates.TemplateItem.prototype.settings,
i);h.setUiThumbnail=function(g){h.thumbnail=g;d(h).trigger("_thumbnailSet");return h};h.thumbnailSet=function(g){d(h).bind("_thumbnailSet",g);return h}},getImageSrc:function(){return juxtapo.utils.isRelativeUrl(this.imageUrl)?juxtapo.utils.resolveAbsoluteUrl(juxtapo.coreJsUrl(),this.imageUrl):this.imageUrl}};juxtapo.templates.TemplateItem.defaultStyles={position:"absolute","z-index":"2000",top:"0px",left:"50%","margin-left":"-550px"}})(jQuery);
(function(d){var e;juxtapo.utils={createCookie:function(a,c,b){if(b){var f=new Date;f.setTime(f.getTime()+b*24*60*60*1E3);b="; expires="+f.toGMTString()}else b="";document.cookie=a+"="+c+b+"; path=/";return true},date:{toShortTimeString:function(a){return a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()+":"+a.getMilliseconds()}},eraseCookie:function(a){e.createCookie(a,"",-1);return true},getQuery:function(a){for(var c=window.location.search.substring(1).split("&"),b=0;b<c.length;b+=1){var f=c[b].split("=");
if(f[0]===a)return f[1]}return null},getJsLocation:function(a){if(typeof a==="string")a=new RegExp(a.toLowerCase());for(var c=document.getElementsByTagName("script"),b=0;b<c.length;b+=1){var f=c[b],i=f.src.substring(f.src.lastIndexOf("/")+1).toLowerCase();if(a.test(i))return f.src.substring(0,f.src.lastIndexOf("/")+1)}return null},getKeyCombination:function(a){a=a.split("+");for(var c={ctrl:false,keyCode:-1,shift:false},b=0;b<a.length;b+=1){var f=a[b].toLowerCase();if(isNaN(parseInt(f,10))){c.shift=
c.shift||f==="shift";c.ctrl=c.ctrl||f==="ctrl"}else c.keyCode=parseInt(f,10)}return c},htmlFromTemplate:function(a,c){for(var b in c)if(c.hasOwnProperty(b))a=a.replace(new RegExp("\\${"+b+"}","g"),c[b]);return a},isAbsoluteUrl:function(a){a=a.toLowerCase();if(a.substr(0,7)==="http://")return true;if(a.substr(0,8)==="file:///")return true;if(a.substr(0,6)==="ftp://")return true;return false},isRelativeUrl:function(a){a=a.toLowerCase();if(a.substr(0,2)==="~/")return true;if(a.substr(0,3)==="../")return true;
if(a.substr(0,2)==="./")return true;return false},isStaticUrl:function(a){a=a.toLowerCase();if(a.substr(0,7)==="file://")return true;if(a.substr(0,6)==="ftp://")return true;if(a.substr(1,1)===":")return true;return false},objectToStructureString:function(a,c,b){if(a===window)return"window";if(typeof c==="undefined")c="";if(typeof b==="undefined")b=0;var f="";for(var i in a)if(!(a[i]instanceof Function))if(typeof a[i]==="object"){if(b<3)f+="<li>"+i+":<br />"+juxtapo.utils.objectToStructureString(a[i],
c+"&nbsp;&nbsp;&nbsp;&nbsp;",b+1)+"</li>"}else f+="<li>"+i+":"+a[i]+"</li>";b="";for(var h in a)if(a[h]instanceof Function)b+="<li>"+h+"</li>";a="";if(f!=="")a+="<li>Properties : <ul>"+f+"</ul></li>";if(b!=="")a+="<br />"+c+"<li>Functions : <ul>"+b+"</ul></li>";return"<ul>"+a+"</ul>"},preventDefaultEventAction:function(a){a.preventDefault();a.keyCode=0;a.which=0},readCookie:function(a){a=a+"=";for(var c=document.cookie.split(";"),b=0;b<c.length;b+=1){for(var f=c[b];f.charAt(0)===" ";)f=f.substring(1,
f.length);if(f.indexOf(a)===0)return f.substring(a.length,f.length)}return null},requireResource:function(a,c){var b=document.getElementsByTagName("head")[0],f=false,i=false;if(a.substr(a.lastIndexOf("."))===".css"){var h=document.createElement("link");h.setAttribute("rel","stylesheet");h.setAttribute("type","text/css");h.setAttribute("href",a);b.appendChild(h);return h}else if(a.substr(a.lastIndexOf("."))===".js"){var g=document.createElement("script");g.type="text/javascript";if(typeof c!=="undefined"){g.onreadystatechange=
function(){if(this.readyState==="complete"&&!f){i=f=true;typeof c!=="undefined"&&c.call(g,a)}};g.onload=function(){if(!f){i=f=true;typeof c!=="undefined"&&c.call(g,a)}}}g.src=a;d(g).appendTo(b);return g}return null},resolveAbsoluteUrl:function(a,c){if(c.substr(0,1)==="/")return a.substring(0,a.indexOf("/",a.indexOf("//")+2))+c;else if(e.isAbsoluteUrl(c))return c;else{a=a;for(a=a.substring(0,a.lastIndexOf("/"));/^\.\./.test(c);){a=a.substring(0,a.lastIndexOf("/"));c=c.substring(3)}c=e.String.ltrim(c,
"/");return a+"/"+c}},String:{contains:function(a,c){return a.indexOf(c)>-1},ltrim:function(a,c){c=c||"\\s";return a.replace(new RegExp("^["+c+"]+","g"),"")},replace:function(a,c,b){return a.replace(new RegExp("["+c+"]","g"),b)},right:function(a,c){if(c<=0)return"";else if(c>String(a).length)return a;else{var b=String(a).length;return String(a).substring(b,b-c)}},rtrim:function(a,c){c=c||"\\s";return a.replace(new RegExp("["+c+"]+$","g"),"")},trim:function(a,c){return e.String.ltrim(e.String.rtrim(a,
c),c)}}};e=juxtapo.utils;String.prototype.juxtapoContains=function(a){return juxtapo.utils.String.contains(this,a)}})(jQuery);juxtapo.ui={};
(function(d){var e=null;juxtapo.ui.DropDown=function(a){this._init(a)};juxtapo.ui.DropDown.prototype={afterOpen:null,beforeOpen:null,controller:null,contents:null,expanded:null,settings:{cssClass:"",style:{height:"auto",width:"905px"}},_init:function(a){this.settings=d.extend({},this.settings,a);this.render();var c=this;d(document).bind("keydown",function(b){if(c.expanded&&b.which===27){c.show(false);return false}})},contentHtml:function(a){if(typeof a==="undefined")return d(this.contents).html();
else d(this.contents).html(a)},render:function(){var a=this;this.controller=document.createElement("div");d(this.controller).attr("class","juxtapo-dropDown");this.controller.onclick=function(){a.toggleShow()};juxtapo.container.appendChild(this.controller);this.contents=document.createElement("div");d(this.contents).attr("class","juxtapo-lightBox").css(this.settings.style);document.getElementsByTagName("body")[0].appendChild(this.contents)},show:function(a){if(typeof a==="undefined")a=true;if(a&&!this.expanded){if(e){e.show(false);
e=null}this.beforeOpen&&this.beforeOpen();d(this.contents).show();d(this.controller).addClass("juxtapo-btn-open");this.expanded=true;e=this;this.afterOpen&&this.afterOpen()}else if(!a){d(this.contents).hide();d(this.controller).removeClass("juxtapo-btn-open");this.expanded=false}return this.expanded},text:function(a){if(typeof a==="undefined")return d(this.controller).html();else d(this.controller).html(a);return this},title:function(a){if(typeof a==="undefined")return d(this.controller).attr("title");
else d(this.controller).attr("title",a);return this},toggleShow:function(){return this.show(!this.expanded)}}})(jQuery);
(function(d){juxtapo.ui.Thumbnail=function(e,a){this._init(e,a)};juxtapo.ui.Thumbnail.prototype={container:null,designTemplate:null,settings:{},thumbnailHtmlTemplate:'  <a href="${href}" class="juxtapo-thumb-lnk">    <span class="juxtapo-thumb-img">      <img height="220" alt="design image" src="${imageSrc}">    </span>  </a>  <span class="juxtapo-thumb-caption">    <a href="${href}" tabindex="-1">      ${caption}    </a>  </span>',_init:function(e,a){var c=this;c.settings=d.extend({},this.settings,
a);c.designTemplate=e;c.container=d('<div class="juxtapo-thumb" />').append(juxtapo.utils.htmlFromTemplate(this.getThumbnailHtmlTemplate(),this.getThumbnailData())).get(0);e.setUiThumbnail(c);c.show=function(b){if(typeof b==="undefined")b=true;b?d(c.container).show():d(c.container).hide()}},getImageSrc:function(){return this.designTemplate.getImageSrc()},getLinkHref:function(e){return juxtapo.utils.isRelativeUrl(e)?juxtapo.utils.resolveAbsoluteUrl(juxtapo.coreJsUrl(),e):e},getThumbnailData:function(){return{caption:this.designTemplate.paths[0],
href:this.getLinkHref(this.designTemplate.paths[0]),imageSrc:this.getImageSrc()}},getThumbnailHtmlTemplate:function(){return this.thumbnailHtmlTemplate}}})(jQuery);
(function(d){juxtapo.ui.Toolbar=function(e){this._init(e)};juxtapo.ui.Toolbar.prototype={_init:function(e){var a=this;this.settings=d.extend({},this.settings,e);this.toolbar$=d('<div class="juxtapo-ui-toolbar juxtapo-cc" class="juxtapo-cc" />');this.toolbarLeft$=d('<div class="juxtapo-ui-toolbarL juxtapo-cc" />').appendTo(a.toolbar$);this.toolbarRight$=d('<div class="juxtapo-ui-toolbarR juxtapo-cc" />').appendTo(a.toolbar$);this.appendTo=function(c){a.toolbar$.appendTo(c);return a};this.appendLeft=
function(c){a.toolbarLeft$.append(c);return a};this.appendRight=function(c){a.toolbarRight$.append(c);return a}},settings:{}}})(jQuery);
(function(d){juxtapo.ui.ToolBtn=function(e){this._init(e)};juxtapo.ui.ToolBtn.prototype={container:null,contents:null,settings:{},_init:function(e,a){var c=this;c.settings=d.extend({},this.settings,a);c.contents=d('<span class="juxtapo-toolbtn-contents" />').get(0);c.container=d('<a class="juxtapo-toolbtn" />').append(c.contents).get(0);c.click=function(b){d(c.container).click(b);return c};c.show=function(){d(c.container).show();return c};c.text=function(b){d(c.contents).html(b);return c}}}})(jQuery);
(function(d){var e,a=null,c=new juxtapo.ui.Toolbar,b=d('<input id="juxtapo-searchDesigns" type="text" title="Search" />'),f=d('<label><span class="label-text">Search:</span></label>').append(b),i=d('<div id="juxtapo-thumbs-container" />');juxtapo.thumbs={rendered:false,dropDown:function(){return a},init:function(){e=juxtapo.thumbs;a=new juxtapo.ui.DropDown;a.text("+");a.title("View template thumbnails");var h=this;a.beforeOpen=function(){h.rendered||h.renderThumbs()};a.afterOpen=function(){d("#juxtapo-searchDesigns").focus()}},
appendToToolbarLeft:function(h){c.toolbarLeft$.append(h);return e},appendToToolbarRight:function(h){c.toolbarRight$.append(h);return e},renderThumbs:function(){juxtapo.eh.logInfo("thumbs rendering");var h=parseInt(d(window).height(),10)-50;d(a.contents).append(c.toolbar$).append(i);c.toolbarLeft$.append(f);i.css("height",h-39+"px");for(h=0;h<juxtapo.templates.collection.length;h+=1){var g=new juxtapo.ui.Thumbnail(juxtapo.templates.collection[h]);i.append(g.container)}b.keyup(this.searchKeyup);this.rendered=
true;d(juxtapo.thumbs).trigger("_thumbsRendered")},searchKeyup:function(){var h=d(this).val();juxtapo.templates.filterBySearch(h)},thumbsContainer:function(){return i.get(0)},thumbsRendered:function(h){d(juxtapo.thumbs).bind("_thumbsRendered",h)}}})(jQuery);
(function(){var d=null;juxtapo.initComplete(function(){d=new juxtapo.ui.DropDown({style:{width:"300px"}});d.text("?");d.title("Juxtapo help and information");var e="";e="<h4>juxtapo version: "+juxtapo.version+', <a href="http://juxtapo.net">website</a></h4><h4>Keyboard Shortcuts</h4><table width="100%"><tr><td>Move Left</td><td>Ctrl+J [+shift for nudge]</td></tr><tr><td>Move Right</td><td>Ctrl+L [+shift for nudge]</td></tr><tr><td>Move Up</td><td>Ctrl+I [+shift for nudge]</td></tr><tr><td>Move Down</td><td>Ctrl+K [+shift for nudge]</td></tr><tr><td>Previous Design</td><td>Ctrl+Up</td></tr><tr><td>Next Design</td><td>Ctrl+Down</td></tr><tr><td>Transparency Back</td><td>Ctrl+U</td></tr><tr><td>Transparency Forward</td><td>Ctrl+O</td></tr><tr><td>Auto Refresh Play/Stop</td><td>Ctrl+Space</td></tr></table><h4>Documention</h4><ul><li><a href="'+juxtapo.utils.resolveAbsoluteUrl(juxtapo.coreJsUrl(),
"../docs/index.html")+'">juxtapo API documentation</a></ul>';d.contentHtml(e)})})(jQuery);
(function(d){juxtapo.Plugin=function(e){if(typeof e==="object")e=e;else if(typeof e==="function"){e=e.call(this);if(typeof e!=="object")e={}}else if(typeof e==="undefined")e={};else throw new juxtapo.eh.Exception("A plugin cannot be instantiated with a "+typeof e);d.extend(this,{},e)};juxtapo.Plugin.prototype={init:function(){if(this.initComplete)return true;if(typeof this._init==="function")try{this._init.call(this)}catch(e){juxtapo.eh.logError(e);return false}this.initComplete=true;this.onInitCompleted();
return true},initComplete:false,initCompleted:function(e){d(this).bind("_initCompleted",e)},onInitCompleted:function(){d(this).trigger("_initCompleted")}}})(jQuery);
